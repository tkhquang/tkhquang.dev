// Server API makes it possible to hook into various parts of Gridsome
// on server-side and add custom data to the GraphQL data layer.
// Learn more: https://gridsome.org/docs/server-api

// Changes here requires a server restart.
// To restart press CTRL + C in terminal and run `gridsome develop`

const { createProxyMiddleware } = require("http-proxy-middleware");

module.exports = function (api) {
  api.configureServer((app) => {
    app.use(
      "/api/",
      createProxyMiddleware({
        target: "http://127.0.0.1:9000",
        pathRewrite: {
          "/api": ""
        }
      })
    );
  });

  api.createPages(({ createPage }) => {
    createPage({
      path: "/blog/categories",
      component: "./src/templates/BlogCategories.vue"
    });

    createPage({
      path: "/blog/tags",
      component: "./src/templates/BlogTags.vue"
    });
  });
};
